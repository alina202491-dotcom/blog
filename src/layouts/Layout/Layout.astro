---
// ‰ªé Astro.props Ëé∑ÂèñÈ°µÈù¢ÂÖÉÊï∞ÊçÆÂíåÈÖçÁΩÆ
const { title, keywords, description, pagecover, activeNav, Home, headings = [] } = Astro.props;
// ÂØºÂÖ•ÁΩëÁ´ôÂÖ®Â±ÄÈÖçÁΩÆ
import SITE_INFO from "@/config";
const { GoogleAds, Theme, HomeBanner } = SITE_INFO;
const { ad_Client, asideAD_Slot, articleAD_Slot } = GoogleAds;
// ÂØºÂÖ• Head ÁªÑ‰ª∂
import Head from "@/components/Head/Head.astro";
// ÂØºÂÖ• Header ÁªÑ‰ª∂
import Header from "@/components/Header/Header.astro";
// ÂØºÂÖ• Main Âå∫ÂüüÁöÑ Header ÁªÑ‰ª∂
import MainHeader from "@/components/MainHeader/MainHeader.astro";
// ÂØºÂÖ•Âè≥‰æßËæπÊ†è Aside ÁªÑ‰ª∂
import Aside from "@/components/Aside/Aside.astro";
// ÂØºÂÖ•Â∫ïÈÉ® Footer ÁªÑ‰ª∂
import Footer from "@/components/Footer/Footer.astro";
// ÂØºÂÖ•ËøîÂõûÈ°∂ÈÉ® BackTop ÁªÑ‰ª∂
import BackTop from "@/components/BackTop/BackTop.astro";
// ÂØºÂÖ•ÊâãÊú∫Á´Ø‰æßËæπÊ†è MobileSidebar ÁªÑ‰ª∂
import MobileSidebar from "@/components/MobileSidebar/MobileSidebar.astro";
// ÂØºÂÖ•ÂÖ®Êñ∞ÁöÑÊñáÁ´†ÁõÆÂΩïÁªÑ‰ª∂
import TableOfContents from "@/components/TableOfContents.astro";
// ÂØºÂÖ•Ê®±Ëä±ÁâπÊïàÁªÑ‰ª∂
import SakuraEffect from "@/components/SakuraEffect.astro";
// ÂºïÂÖ•Ê†∑Âºè
import "@/styles/Reset.less";
import "@/styles/Base.less";
import "./Layout.less";

// Âà§Êñ≠ÂΩìÂâçÈ°µÈù¢ÊòØÂê¶‰∏∫ÊñáÁ´†È°µ
const isArticlePage = headings && headings.length > 0;
---

<html lang="zh-CN">
	{/* ======================================================= */}
	{/* == ÂÖ≥ÈîÆ‰øÆÂ§çÔºöÂ∞Ü {Title} ‰øÆÊîπ‰∏∫ {title} == */}
	{/* ======================================================= */}
	<Head Title={title} keywords={keywords} description={description} PageCover={pagecover}>
		<!-- Ë∞∑Ê≠åÂπøÂëäJSÂä†ËΩΩÈ°π -->
		{ad_Client && (asideAD_Slot || articleAD_Slot) && <script is:inline async src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${ad_Client}`} crossorigin="anonymous" />}
		<!-- ÂΩ©ÊóóüéàÁâπÊïàËÑöÊú¨ -->
		<script is:inline src="/assets/js/vhCaiqi.js" defer></script>
		<!-- ÂÜÖËÅîÊ†∑Âºè -->
		<Fragment
			set:html={`<style>:root {${Object.entries(Theme)
				.map(([key, value]) => `${key}:${value};`)
				.join("")}--vh-main-header-height:${Home ? HomeBanner.HomeHeight : HomeBanner.PageHeight};--vh-home-banner:${HomeBanner.background}}</style>`}
		/>
	</Head>
	<body>
		<MobileSidebar />
		<Header {activeNav} />
		<main class="main">
			{HomeBanner.enable && <MainHeader />}
			<!-- ‰∏∫ main-inner Ê∑ªÂä†‰∏Ä‰∏™ class Êù•ÊéßÂà∂Â∏ÉÂ±Ä -->
			<section class:list={["main-inner", { "is-article": isArticlePage }]} style={`padding-top:${HomeBanner.enable ? "0.88rem" : "calc(66px + 0.68rem)"}`}>
				
                <!-- Â∑¶‰æßÁõÆÂΩïÔºöÂè™Âú®ÊñáÁ´†È°µÊòæÁ§∫ -->
                {isArticlePage && (
                    <aside class="toc-sidebar">
                        <TableOfContents headings={headings} />
                    </aside>
                )}

				<section class="main-inner-content">
					<slot />
				</section>

                <!-- Âè≥‰æßËæπÊ†è -->
				<Aside />
			</section>
			<BackTop />
		</main>
		<Footer />
		<SakuraEffect />

		<script>
			import InitFn from "@/scripts/Init";
			InitFn();
		</script>
	</body>
</html>
