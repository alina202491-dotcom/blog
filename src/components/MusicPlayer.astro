---
// src/components/MusicPlayer.astro
// 【更新】
// 切换回 MetingJS API 的方式，并采用官方文档推荐的集成方法。
---

<!-- 
  1. 根据文档，我们先定义全局的 API 地址。
-->
<script is:inline>
  var meting_api='https://music.ikuner.tech/api?server=:server&type=:type&id=:id&auth=:auth&r=:r';
</script>

<!-- 
  2. 然后，我们引入 MetingJS 插件。
  它会自动查找上面定义的 `meting_api` 变量。
  我们使用了你文档中提供的特定 MetingJS 插件地址。
-->
<script is:inline src="https://cdn.jsdelivr.net/npm/@xizeyoupan/meting@latest/dist/Meting.min.js"></script>

<!-- 
  3. 最后，我们放置 meting-js 标签来创建播放器。
  这次我们不需要在标签上指定 `api` 属性了。
-->
<meting-js
  id="13597135963"
  server="netease"
  type="playlist"
  fixed="true"
  mini="true"
  preload="auto"
  order="random"
  volume="0.7"
>
</meting-js>

<!--
  添加一些样式来确保播放器位置和层级正确。
-->
<style is:global>
  .aplayer.aplayer-fixed {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    z-index: 2147483647 !important;
  }
</style>
