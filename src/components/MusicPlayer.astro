---
// src/components/MusicPlayer.astro
// 【最终方案】
// 我们现在直接从你网站的 public 目录加载本地音乐文件。
// 这是最稳定、最可靠的方法，不会有任何网络或权限问题。
---

<!-- 1. 引入 APlayer 的 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">

<!-- 2. APlayer 播放器的挂载点 -->
<div id="aplayer"></div>

<!-- 3. 引入 APlayer 的 JS -->
<script is:inline src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<!-- 4. 初始化 APlayer -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const ap = new APlayer({
      container: document.getElementById('aplayer'),
      fixed: true,
      mini: true,
      theme: '#2980b9',
      audio: [
        {
          name: '爱在西元前', // 改成你的歌曲名
          artist: '周杰伦', // 改成歌手名
          url: '/music/爱在西元前 - 周杰伦.mp3', // 【重要】对应 public/music/song1.mp3
          cover: 'https://iili.io/F4lPWkG.jpg', // 【重要】对应 public/music/cover1.jpg
        },
        {
          name: '曹操',
          artist: '林俊杰',
          url: '/music/曹操 - 林俊杰.mp3', // 【重要】对应 public/music/song2.mp3
          cover: 'https://iili.io/F4Vqd57.jpg', // 【重要】对应 public/music/cover2.png
        },
        {
          name: '卜卦(pay姐版1.1x)',
          artist: 'pay姐（黏苞米糊糊）',
          url: '/music/卜卦(pay姐版1.1x) - pay姐（黏苞米糊糊）.mp3', // 【重要】对应 public/music/song2.mp3
          cover: 'https://iili.io/F4VuGkv.webp', // 【重要】对应 public/music/cover2.png
        }
        // 你可以按这个格式添加更多歌曲
      ]
    });
  });
</script>

<style is:global>
  .aplayer.aplayer-fixed {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    z-index: 2147483647 !important;
  }
</style>
